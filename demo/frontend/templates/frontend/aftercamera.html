<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://bootswatch.com/4/cosmo/bootstrap.min.css">
    <title>人脸特征值识别</title>
    {% load static %}
    <script>
        function speak() {
            var ttsDiv = document.getElementById('bdtts_div_id');
            var ttsAudio = document.getElementById('tts_autio_id');
            var Text1 = document.getElementById('l1').innerHTML;
            var Text2 = document.getElementById('l2').innerHTML;
            var Text3 = document.getElementById('l3').innerHTML;
            var Text4 = document.getElementById('l4').innerHTML;
            var Text5 = document.getElementById('l5').innerHTML;
            var Text6 = document.getElementById('l6').innerHTML;

            var sum = Text1 +'。'+ Text2 +'。'+ Text3 +'。' + Text4 +'。' + Text5 +'。' + Text6;
            // 文字转语音
            ttsDiv.removeChild(ttsAudio);
            var au1 = '<audio id="tts_autio_id" autoplay="autoplay">';
            var sss = '<source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&per=3&spd=5&text=' +sum + '" type="audio/mpeg">';
            var eee = '<embed id="tts_embed_id" height="0" width="0" src="">';
            var au2 = '</audio>';
            ttsDiv.innerHTML = au1 + sss + eee + au2;

            ttsAudio = document.getElementById('tts_autio_id');

            ttsAudio.play();
        }
    </script>
</head>

<body>
    <h1 style="text-align: center">人脸图片上传</h1>

    <div id="bdtts_div_id">
        <audio id="tts_autio_id" autoplay="autoplay">
          <source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=5&per=1&text" type="audio/mpeg">
          <embed id="tts_embed_id" height="0" width="0" src="">
        </audio>
    </div>

    <label>{{ error_msg }}</label>
    <br>
    <div class="container" style="align-items: center; justify-content: center;">
    <div class="card" style="width: 18rem; text-align: center;margin:auto; ">
        
        <!-- 让图片回显 -->
        {% if picurl %}
            <img class="card-img-top" src="{% static  picurl %}">
        {% endif %}
        <div class="card-body">
        <h5 id="l1" class="card-title">{{ success_msg }}</h5>
        <ul class="list-group list-group-flush">
            <li  id="l2" class="list-group-item">{{age}}</li>
            <li  id="l3" class="list-group-item">{{expression}}</li>
            <li id="l4" class="list-group-item">{{ gender }}</li>
            <li id="l5" class="list-group-item">{{ glasses }}</li>
            <li id="l6" class="list-group-item">{{ beauty }}</li>
        </ul>
        </div>
    </div>
    </div>  
    <div class="d-flex flex-column" style="margin-top: 50px;">
        <button style="margin:auto;" class="btn btn-lg btn-outline-success p-4" id="tts_btn" onclick="speak()">语音播报</button>
        <a style="margin:auto;" href="/app/">
            <button  class="btn btn-lg btn-outline-success p-4"  id="tts_btn">返回主页</button>
        </a>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
</body>
</html>